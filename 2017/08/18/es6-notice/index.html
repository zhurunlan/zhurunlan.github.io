<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>ES6 的浏览器兼容性问题 | runlan.zhu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ES6 的浏览器兼容性问题">
<meta name="keywords" content="js,es6">
<meta property="og:type" content="article">
<meta property="og:title" content="ES6 的浏览器兼容性问题">
<meta property="og:url" content="http://yoursite.com/2017/08/18/es6-notice/index.html">
<meta property="og:site_name" content="runlan.zhu">
<meta property="og:description" content="ES6 的浏览器兼容性问题">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-05-24T14:18:29.592Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ES6 的浏览器兼容性问题">
<meta name="twitter:description" content="ES6 的浏览器兼容性问题">
  
    <link rel="alternate" href="/atom.xml" title="runlan.zhu" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars1.githubusercontent.com/u/33336952?s=460&amp;amp;v=4">
    <h2 class="author">runlan.zhu</h2>
    <h3 class="description">沐阳</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>10</strong><br>文章</div></a>
      <a href="/categories"><div><strong>6</strong><br>分类</div></a>
      <a href="/tags"><div><strong>10</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-es6-notice" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/18/es6-notice/" class="article-date">
  <time class="post-time" datetime="2017-08-18T04:36:05.000Z" itemprop="datePublished">
    <span class="post-month">8月</span><br>
    <span class="post-day">18</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ES6 的浏览器兼容性问题
    </h1>
  

        <div>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/js/">js</a>
  </div>

          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="eg-ES6-Webpack-Babel"><a href="#eg-ES6-Webpack-Babel" class="headerlink" title="eg: ES6 + Webpack + Babel"></a>eg: ES6 + Webpack + Babel</h3><h3 id="下面是一些基本的开发依赖："><a href="#下面是一些基本的开发依赖：" class="headerlink" title="下面是一些基本的开发依赖："></a>下面是一些基本的开发依赖：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"babel-core"</span>: <span class="string">"~6.3.15"</span>,</span><br><span class="line">    <span class="string">"babel-loader"</span>: <span class="string">"~6.2.0"</span>,</span><br><span class="line">    <span class="string">"babel-preset-es2015"</span>: <span class="string">"~6.3.13"</span>,</span><br><span class="line">    <span class="string">"babel-preset-stage-0"</span>: <span class="string">"~6.3.13"</span>,</span><br><span class="line">    <span class="string">"babel-runtime"</span>: <span class="string">"~6.3.13"</span>,</span><br><span class="line">    <span class="string">"extract-text-webpack-plugin"</span>: <span class="string">"~0.9.1"</span>,</span><br><span class="line">    <span class="string">"less-loader"</span>: <span class="string">"~2.2.1"</span>,</span><br><span class="line">    <span class="string">"nunjucks-loader"</span>: <span class="string">"~1.0.7"</span>,</span><br><span class="line">    <span class="string">"style-loader"</span>: <span class="string">"~0.10.2"</span>,</span><br><span class="line">    <span class="string">"webpack"</span>: <span class="string">"~1.12.9"</span>,</span><br><span class="line">    <span class="string">"webpack-dev-server"</span>: <span class="string">"^1.10.1"</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="0x01-polyfill"><a href="#0x01-polyfill" class="headerlink" title="0x01 polyfill"></a>0x01 polyfill</h2><h3 id="由于-Babel-默认只转换转各种-ES2015-语法，而不转换新的-API，比如-Promise，以及-Object-assign、Array-from-这些新方法，这时我们需要提供一些-ployfill-来模拟出这样一个提供原生支持功能的浏览器环境。"><a href="#由于-Babel-默认只转换转各种-ES2015-语法，而不转换新的-API，比如-Promise，以及-Object-assign、Array-from-这些新方法，这时我们需要提供一些-ployfill-来模拟出这样一个提供原生支持功能的浏览器环境。" class="headerlink" title="由于 Babel 默认只转换转各种 ES2015 语法，而不转换新的 API，比如 Promise，以及 Object.assign、Array.from 这些新方法，这时我们需要提供一些 ployfill 来模拟出这样一个提供原生支持功能的浏览器环境。"></a>由于 Babel 默认只转换转各种 ES2015 语法，而不转换新的 API，比如 Promise，以及 Object.assign、Array.from 这些新方法，这时我们需要提供一些 ployfill 来模拟出这样一个提供原生支持功能的浏览器环境。</h3><h3 id="主要有两种方式：babel-runtime-和-babel-polyfill。"><a href="#主要有两种方式：babel-runtime-和-babel-polyfill。" class="headerlink" title="主要有两种方式：babel-runtime 和 babel-polyfill。"></a>主要有两种方式：babel-runtime 和 babel-polyfill。</h3><h3 id="babel-runtime"><a href="#babel-runtime" class="headerlink" title="babel-runtime"></a>babel-runtime</h3><h3 id="babel-runtime-的作用是模拟-ES2015-环境，包含各种分散的-polyfill-模块，我们可以在自己的模块里单独引入，比如-promise："><a href="#babel-runtime-的作用是模拟-ES2015-环境，包含各种分散的-polyfill-模块，我们可以在自己的模块里单独引入，比如-promise：" class="headerlink" title="babel-runtime 的作用是模拟 ES2015 环境，包含各种分散的 polyfill 模块，我们可以在自己的模块里单独引入，比如 promise："></a>babel-runtime 的作用是模拟 ES2015 环境，包含各种分散的 polyfill 模块，我们可以在自己的模块里单独引入，比如 promise：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'babel-runtime/core-js/promise'</span></span><br></pre></td></tr></table></figure>
<h2 id="它们不会在全局环境添加未实现的方法，只是这样手动引用每个-polyfill-会非常低效，我们可以借助-Runtime-transform-插件来自动化处理这一切。"><a href="#它们不会在全局环境添加未实现的方法，只是这样手动引用每个-polyfill-会非常低效，我们可以借助-Runtime-transform-插件来自动化处理这一切。" class="headerlink" title="它们不会在全局环境添加未实现的方法，只是这样手动引用每个 polyfill 会非常低效，我们可以借助 Runtime transform 插件来自动化处理这一切。"></a>它们不会在全局环境添加未实现的方法，只是这样手动引用每个 polyfill 会非常低效，我们可以借助 Runtime transform 插件来自动化处理这一切。</h2><h2 id="首先使用-npm-安装："><a href="#首先使用-npm-安装：" class="headerlink" title="首先使用 npm 安装："></a>首先使用 npm 安装：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-transform-runtime --save-dev</span><br></pre></td></tr></table></figure>
<h2 id="然后在-webpack-配置文件的-babel-loader-增加选项："><a href="#然后在-webpack-配置文件的-babel-loader-增加选项：" class="headerlink" title="然后在 webpack 配置文件的 babel-loader 增加选项："></a>然后在 webpack 配置文件的 babel-loader 增加选项：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">loader: [<span class="string">"babel-loader"</span>],</span><br><span class="line">query: &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="string">"transform-runtime"</span></span><br><span class="line">  ],</span><br><span class="line">  presets: [<span class="string">'es2015'</span>, <span class="string">'stage-0'</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="babel-polyfill"><a href="#babel-polyfill" class="headerlink" title="babel-polyfill"></a>babel-polyfill</h2><h3 id="而-babel-polyfill-是针对全局环境的，引入它浏览器就好像具备了规范里定义的完整的特性，一旦引入，就会跑一个-babel-polyfill-实例。用法如下："><a href="#而-babel-polyfill-是针对全局环境的，引入它浏览器就好像具备了规范里定义的完整的特性，一旦引入，就会跑一个-babel-polyfill-实例。用法如下：" class="headerlink" title="而 babel-polyfill 是针对全局环境的，引入它浏览器就好像具备了规范里定义的完整的特性，一旦引入，就会跑一个 babel-polyfill 实例。用法如下："></a>而 babel-polyfill 是针对全局环境的，引入它浏览器就好像具备了规范里定义的完整的特性，一旦引入，就会跑一个 babel-polyfill 实例。用法如下：</h3><h3 id="1-安装-babel-polyfill"><a href="#1-安装-babel-polyfill" class="headerlink" title="1.安装 babel-polyfill"></a>1.安装 babel-polyfill</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-polyfill --save</span><br></pre></td></tr></table></figure>
<h3 id="2-在入口文件中引用："><a href="#2-在入口文件中引用：" class="headerlink" title="2.在入口文件中引用："></a>2.在入口文件中引用：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'babel-polyfill'</span></span><br></pre></td></tr></table></figure>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><h3 id="其实做到这些，在大部分浏览器就可以正常跑了，但我们做的是一个用户环境很不确定的产品，对一些年代久远但又不容忽视的运行环境，比如-IE8，我们做的还不够。"><a href="#其实做到这些，在大部分浏览器就可以正常跑了，但我们做的是一个用户环境很不确定的产品，对一些年代久远但又不容忽视的运行环境，比如-IE8，我们做的还不够。" class="headerlink" title="其实做到这些，在大部分浏览器就可以正常跑了，但我们做的是一个用户环境很不确定的产品，对一些年代久远但又不容忽视的运行环境，比如 IE8，我们做的还不够。"></a>其实做到这些，在大部分浏览器就可以正常跑了，但我们做的是一个用户环境很不确定的产品，对一些年代久远但又不容忽视的运行环境，比如 IE8，我们做的还不够。</h3><h3 id="接下来将开始讲述我们在兼容性方面遇到的一些问题，和解决方法。"><a href="#接下来将开始讲述我们在兼容性方面遇到的一些问题，和解决方法。" class="headerlink" title="接下来将开始讲述我们在兼容性方面遇到的一些问题，和解决方法。"></a>接下来将开始讲述我们在兼容性方面遇到的一些问题，和解决方法。</h3><h2 id="0x02-开始在-IE8-运行"><a href="#0x02-开始在-IE8-运行" class="headerlink" title="0x02 开始在 IE8 运行"></a>0x02 开始在 IE8 运行</h2><h3 id="最开始做的时候并没有针对-IE-做一些兼容性方面的处理，结果在-IE8-上一跑一堆问题。"><a href="#最开始做的时候并没有针对-IE-做一些兼容性方面的处理，结果在-IE8-上一跑一堆问题。" class="headerlink" title="最开始做的时候并没有针对 IE 做一些兼容性方面的处理，结果在 IE8 上一跑一堆问题。"></a>最开始做的时候并没有针对 IE 做一些兼容性方面的处理，结果在 IE8 上一跑一堆问题。</h3><h3 id="第一步，我们把-jQuery-换成-1-12-1-，因为-2-X-已经不再支持-IE8。"><a href="#第一步，我们把-jQuery-换成-1-12-1-，因为-2-X-已经不再支持-IE8。" class="headerlink" title="第一步，我们把 jQuery 换成 1.12.1 ，因为 2.X 已经不再支持 IE8。"></a>第一步，我们把 jQuery 换成 1.12.1 ，因为 2.X 已经不再支持 IE8。</h3><h3 id="但并没有像我们想象中的那样，只是简单换一下-jQuery-版本就可以正常运行了。"><a href="#但并没有像我们想象中的那样，只是简单换一下-jQuery-版本就可以正常运行了。" class="headerlink" title="但并没有像我们想象中的那样，只是简单换一下 jQuery 版本就可以正常运行了。"></a>但并没有像我们想象中的那样，只是简单换一下 jQuery 版本就可以正常运行了。</h3><h2 id="0x03-default-or-catch"><a href="#0x03-default-or-catch" class="headerlink" title="0x03 default or catch"></a>0x03 default or catch</h2><h3 id="这是遇到的第一个问题。在兼容性测试过程中，对下面的代码："><a href="#这是遇到的第一个问题。在兼容性测试过程中，对下面的代码：" class="headerlink" title="这是遇到的第一个问题。在兼容性测试过程中，对下面的代码："></a>这是遇到的第一个问题。在兼容性测试过程中，对下面的代码：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_interopRequireDefault</span>(<span class="params">obj</span>) </span>&#123; <span class="keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : &#123; <span class="attr">default</span>: obj &#125;; &#125;</span><br></pre></td></tr></table></figure>
<h2 id="或者这种："><a href="#或者这种：" class="headerlink" title="或者这种："></a>或者这种：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = _main2.default;</span><br></pre></td></tr></table></figure>
<h3 id="在-IE8-下会直接报”缺少标识符、字符串或数字”的错。"><a href="#在-IE8-下会直接报”缺少标识符、字符串或数字”的错。" class="headerlink" title="在 IE8 下会直接报”缺少标识符、字符串或数字”的错。"></a>在 IE8 下会直接报”缺少标识符、字符串或数字”的错。</h3><h3 id="我们得在对象的属性上加-‘’-才可以。就像下面这样："><a href="#我们得在对象的属性上加-‘’-才可以。就像下面这样：" class="headerlink" title="我们得在对象的属性上加 ‘’ 才可以。就像下面这样："></a>我们得在对象的属性上加 ‘’ 才可以。就像下面这样：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_interopRequireDefault</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obj &amp;&amp; obj.__esModule ? obj : &#123; <span class="string">'default'</span>: obj &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = _main2[<span class="string">'default'</span>];</span><br></pre></td></tr></table></figure>
<h3 id="至于原因，并不是-IE8-下对象的属性必须得加-‘’-才行，而是-default-的问题，作为一个关键字，同样的问题还包括-catch。"><a href="#至于原因，并不是-IE8-下对象的属性必须得加-‘’-才行，而是-default-的问题，作为一个关键字，同样的问题还包括-catch。" class="headerlink" title="至于原因，并不是 IE8 下对象的属性必须得加 ‘’ 才行，而是 default 的问题，作为一个关键字，同样的问题还包括 catch。"></a>至于原因，并不是 IE8 下对象的属性必须得加 ‘’ 才行，而是 default 的问题，作为一个关键字，同样的问题还包括 catch。</h3><h3 id="这两种情况，可以通过使用-transform-es3-property-literals-和-transform-es3-member-expression-literals-这两个插件搞定。"><a href="#这两种情况，可以通过使用-transform-es3-property-literals-和-transform-es3-member-expression-literals-这两个插件搞定。" class="headerlink" title="这两种情况，可以通过使用 transform-es3-property-literals 和 transform-es3-member-expression-literals 这两个插件搞定。"></a>这两种情况，可以通过使用 transform-es3-property-literals 和 transform-es3-member-expression-literals 这两个插件搞定。</h3><h2 id="0x04-es5-shim、es5-sham"><a href="#0x04-es5-shim、es5-sham" class="headerlink" title="0x04 es5-shim、es5-sham"></a>0x04 es5-shim、es5-sham</h2><h3 id="为了兼容像-IE8-这样的老版本浏览器，我们引入-es5-shim-作为-polyfill。"><a href="#为了兼容像-IE8-这样的老版本浏览器，我们引入-es5-shim-作为-polyfill。" class="headerlink" title="为了兼容像 IE8 这样的老版本浏览器，我们引入 es5-shim 作为 polyfill。"></a>为了兼容像 IE8 这样的老版本浏览器，我们引入 es5-shim 作为 polyfill。</h3><h3 id="但在遇到-Object-defineProperty-仍提示-“对象不支持此操作”"><a href="#但在遇到-Object-defineProperty-仍提示-“对象不支持此操作”" class="headerlink" title="但在遇到 Object.defineProperty 仍提示 “对象不支持此操作”"></a>但在遇到 Object.defineProperty 仍提示 “对象不支持此操作”</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">As currently implemented, the Object.defineProperty shim will not install on IE8 because IE8 already has such a method. However, the built-in IE8 method only works when applied to DOM objects.</span><br></pre></td></tr></table></figure>
<p>其实 es5-shim 明确说明，这个方法的 polyfill 在 IE8 会失败，因为 IE8 已经有个同名的方法，但只是用于 DOM 对象。</p>
<h3 id="同样的问题还包括-Object-create，上述问题可以再引入-es5-sham-解决"><a href="#同样的问题还包括-Object-create，上述问题可以再引入-es5-sham-解决" class="headerlink" title="同样的问题还包括 Object.create，上述问题可以再引入 es5-sham 解决"></a>同样的问题还包括 Object.create，上述问题可以再引入 es5-sham 解决</h3><h2 id="0x05-addEventListener"><a href="#0x05-addEventListener" class="headerlink" title="0x05 addEventListener"></a>0x05 addEventListener</h2><h3 id="项目中有部分代码直接使用-addEventListener-这个-API，但在-IE8-下的事件绑定并不是这个方法。"><a href="#项目中有部分代码直接使用-addEventListener-这个-API，但在-IE8-下的事件绑定并不是这个方法。" class="headerlink" title="项目中有部分代码直接使用 addEventListener 这个 API，但在 IE8 下的事件绑定并不是这个方法。"></a>项目中有部分代码直接使用 addEventListener 这个 API，但在 IE8 下的事件绑定并不是这个方法。</h3><h3 id="这个问题很容易解决，也无需去写额外的-polyfill。我们已经把-jQuery-换成-1-x，所以只需把代码中-addEventListener-换成-jQuery-的写法就-Okay-了。"><a href="#这个问题很容易解决，也无需去写额外的-polyfill。我们已经把-jQuery-换成-1-x，所以只需把代码中-addEventListener-换成-jQuery-的写法就-Okay-了。" class="headerlink" title="这个问题很容易解决，也无需去写额外的 polyfill。我们已经把 jQuery 换成 1.x，所以只需把代码中 addEventListener 换成 jQuery 的写法就 Okay 了。"></a>这个问题很容易解决，也无需去写额外的 polyfill。我们已经把 jQuery 换成 1.x，所以只需把代码中 addEventListener 换成 jQuery 的写法就 Okay 了。</h3><h3 id="jQuery-其实为我们封装了很多-API，并做了很多兼容性的封装，类似的只要使用封装好的就可以了。"><a href="#jQuery-其实为我们封装了很多-API，并做了很多兼容性的封装，类似的只要使用封装好的就可以了。" class="headerlink" title="jQuery 其实为我们封装了很多 API，并做了很多兼容性的封装，类似的只要使用封装好的就可以了。"></a>jQuery 其实为我们封装了很多 API，并做了很多兼容性的封装，类似的只要使用封装好的就可以了。</h3><h2 id="0x06-无法获取未定义或-null-引用的属性"><a href="#0x06-无法获取未定义或-null-引用的属性" class="headerlink" title="0x06 无法获取未定义或 null 引用的属性"></a>0x06 无法获取未定义或 null 引用的属性</h2><h3 id="这个问题是在特定场景下【转人工】出现的，出现问题的不是-IE8，而是-IE9-和-IE10。"><a href="#这个问题是在特定场景下【转人工】出现的，出现问题的不是-IE8，而是-IE9-和-IE10。" class="headerlink" title="这个问题是在特定场景下【转人工】出现的，出现问题的不是 IE8，而是 IE9 和 IE10。"></a>这个问题是在特定场景下【转人工】出现的，出现问题的不是 IE8，而是 IE9 和 IE10。</h3><h3 id="原因是-ocs-实例创建失败，因为没有调用父类的构造函数。"><a href="#原因是-ocs-实例创建失败，因为没有调用父类的构造函数。" class="headerlink" title="原因是 ocs 实例创建失败，因为没有调用父类的构造函数。"></a>原因是 ocs 实例创建失败，因为没有调用父类的构造函数。</h3><h3 id="通过安装-transform-es2015-classes-和-transform-proto-to-assign-解决。"><a href="#通过安装-transform-es2015-classes-和-transform-proto-to-assign-解决。" class="headerlink" title="通过安装 transform-es2015-classes 和 transform-proto-to-assign 解决。"></a>通过安装 transform-es2015-classes 和 transform-proto-to-assign 解决。</h3><h3 id="在配置项加上这两个插件的配置："><a href="#在配置项加上这两个插件的配置：" class="headerlink" title="在配置项加上这两个插件的配置："></a>在配置项加上这两个插件的配置：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"plugins"</span>: [</span><br><span class="line">      [<span class="string">"transform-es2015-classes"</span>, &#123; <span class="string">"loose"</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">      <span class="string">"transform-proto-to-assign"</span></span><br><span class="line"></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="0x07-postMessage"><a href="#0x07-postMessage" class="headerlink" title="0x07 postMessage"></a>0x07 postMessage</h2><h3 id="虽然-postMessage-是-HTML5-的特性，但-IE8-和-Firefox3-很早就实现了这个-API，当然，跟后来的标准并不一致。这其实也不能怪-IE8。"><a href="#虽然-postMessage-是-HTML5-的特性，但-IE8-和-Firefox3-很早就实现了这个-API，当然，跟后来的标准并不一致。这其实也不能怪-IE8。" class="headerlink" title="虽然 postMessage 是 HTML5 的特性，但 IE8 和 Firefox3 很早就实现了这个 API，当然，跟后来的标准并不一致。这其实也不能怪 IE8。"></a>虽然 postMessage 是 HTML5 的特性，但 IE8 和 Firefox3 很早就实现了这个 API，当然，跟后来的标准并不一致。这其实也不能怪 IE8。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The postMessage method is supported in Internet Explorer from version 8, Firefox from version 3 and Opera from version 9.5.</span><br></pre></td></tr></table></figure>
<h3 id="我们可能会这样去使用："><a href="#我们可能会这样去使用：" class="headerlink" title="我们可能会这样去使用："></a>我们可能会这样去使用：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parent.postMessage(&#123;<span class="attr">success</span>: <span class="string">'ok'</span>, <span class="attr">name</span>: ‘mirreal’&#125;, ‘*’);</span><br></pre></td></tr></table></figure>
<h3 id="但是为了兼容-IE8，我们得转成字符串："><a href="#但是为了兼容-IE8，我们得转成字符串：" class="headerlink" title="但是为了兼容 IE8，我们得转成字符串："></a>但是为了兼容 IE8，我们得转成字符串：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">parent.postMessage(<span class="built_in">JSON</span>.stringify(&#123;<span class="attr">success</span>: <span class="string">'ok'</span>, <span class="attr">name</span>: <span class="string">"mirreal"</span>&#125;), ‘*’);</span><br></pre></td></tr></table></figure>
<h3 id="另外一个需要注意的点是：在-IE8-下-window-postMessage-是同步的。"><a href="#另外一个需要注意的点是：在-IE8-下-window-postMessage-是同步的。" class="headerlink" title="另外一个需要注意的点是：在 IE8 下 window.postMessage 是同步的。"></a>另外一个需要注意的点是：在 IE8 下 window.postMessage 是同步的。</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.postMessage is syncronouse <span class="keyword">in</span> IE <span class="number">8</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> syncronouse = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(syncronouse); <span class="comment">// 在 IE8 下会在控制台打印 true</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.postMessage(<span class="string">'test'</span>, <span class="string">'*'</span>);</span><br><span class="line">syncronouse = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<h2 id="0x09-定义文档兼容性"><a href="#0x09-定义文档兼容性" class="headerlink" title="0x09 定义文档兼容性"></a>0x09 定义文档兼容性</h2><h3 id="X-UA-Compatible-当初是针对-IE8-新加的一个配置。用于为-IE8-指定不同的页面渲染模式，比如使用-IE7-兼容模式，或者是采用最新的引擎。"><a href="#X-UA-Compatible-当初是针对-IE8-新加的一个配置。用于为-IE8-指定不同的页面渲染模式，比如使用-IE7-兼容模式，或者是采用最新的引擎。" class="headerlink" title="X-UA-Compatible 当初是针对 IE8 新加的一个配置。用于为 IE8 指定不同的页面渲染模式，比如使用 IE7 兼容模式，或者是采用最新的引擎。"></a>X-UA-Compatible 当初是针对 IE8 新加的一个配置。用于为 IE8 指定不同的页面渲染模式，比如使用 IE7 兼容模式，或者是采用最新的引擎。</h3><h3 id="现在基本也不需要前者的降级模式，更多的是写入-IE-edge-支持最新特性。而-chrome-1-则会激活-Google-Chrome-Frame，前提是你的-IE-安装过这个插件。"><a href="#现在基本也不需要前者的降级模式，更多的是写入-IE-edge-支持最新特性。而-chrome-1-则会激活-Google-Chrome-Frame，前提是你的-IE-安装过这个插件。" class="headerlink" title="现在基本也不需要前者的降级模式，更多的是写入 IE=edge 支持最新特性。而 chrome=1 则会激活 Google Chrome Frame，前提是你的 IE 安装过这个插件。"></a>现在基本也不需要前者的降级模式，更多的是写入 IE=edge 支持最新特性。而 chrome=1 则会激活 Google Chrome Frame，前提是你的 IE 安装过这个插件。</h3><h3 id="有什么用呢，当然有用，有些-API-是作为新特性存在于-IE8-中的，比如-JSON，不开启的话就用不了。"><a href="#有什么用呢，当然有用，有些-API-是作为新特性存在于-IE8-中的，比如-JSON，不开启的话就用不了。" class="headerlink" title="有什么用呢，当然有用，有些 API 是作为新特性存在于 IE8 中的，比如 JSON，不开启的话就用不了。"></a>有什么用呢，当然有用，有些 API 是作为新特性存在于 IE8 中的，比如 JSON，不开启的话就用不了。</h3><h3 id="为什么要用-X-UA-Compatible？"><a href="#为什么要用-X-UA-Compatible？" class="headerlink" title="为什么要用 X-UA-Compatible？"></a>为什么要用 X-UA-Compatible？</h3><h3 id="在-IE8-刚推出的时候，很多网页由于重构的问题，无法适应较高级的浏览器，所以使用-X-UA-Compatible-强制-IE8-采用低版本方式渲染。"><a href="#在-IE8-刚推出的时候，很多网页由于重构的问题，无法适应较高级的浏览器，所以使用-X-UA-Compatible-强制-IE8-采用低版本方式渲染。" class="headerlink" title="在 IE8 刚推出的时候，很多网页由于重构的问题，无法适应较高级的浏览器，所以使用 X-UA-Compatible 强制 IE8 采用低版本方式渲染。"></a>在 IE8 刚推出的时候，很多网页由于重构的问题，无法适应较高级的浏览器，所以使用 X-UA-Compatible 强制 IE8 采用低版本方式渲染。</h3><p>比如：使用下面这段代码后，开发者无需考虑网页是否兼容 IE8 浏览器，只要确保网页在 IE6、IE7 下的表现就可以了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=EmulateIE7&quot; /&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="而这段代码："><a href="#而这段代码：" class="headerlink" title="而这段代码："></a>而这段代码：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge,chrome=1&quot; /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="IE-edge-告诉-IE-使用最新的引擎渲染网页，chrome-1-则可以激活-Chrome-Frame-1-。"><a href="#IE-edge-告诉-IE-使用最新的引擎渲染网页，chrome-1-则可以激活-Chrome-Frame-1-。" class="headerlink" title="IE=edge 告诉 IE 使用最新的引擎渲染网页，chrome=1 则可以激活 Chrome Frame[1]。"></a>IE=edge 告诉 IE 使用最新的引擎渲染网页，chrome=1 则可以激活 Chrome Frame[1]。</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/18/es6-notice/" data-id="cjw3addzm000bvorjx4fmcn8x" class="article-share-link">分享</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es6/">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/01/18/axios-set/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          axios拦截器配置
        
      </div>
    </a>
  
  
    <a href="/2017/06/28/vue-resource/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">vue resource</div>
    </a>
  
</nav>

  
</article>




<div id="lv-container" data-id="city" data-uid="MTAyMC8zNjE3MC8xMjcwNQ==">
  <script type="text/javascript">
    (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
  <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- 页面点击小红心 -->
<script src="/js/tctip-1.0.1.min.js"></script>
<script type="text/javascript" src="/js/clicklove.js"></script>
<!--打赏功能-->
<script src="/js/tctip-1.0.1.min.js"></script>
<script>
  new tctip({
    top: '20%',
    button: {
      id: 9,
      type: 'dashang',
    },
    list: [
      {
        type: 'alipay',
        qrImg: '/img/zhifubao.jpg'
      }, {
        type: 'wechat',
        qrImg: '/img/weixin.png'
      }
    ]
  }).init()
  var todo = new leanCloud()._getTime('test');
</script></section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">runlan.zhu</h1>
    <h2 class="blog-subtitle">岁月静好，一半风里飞扬，一半沐浴阳光</h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars1.githubusercontent.com/u/33336952?s=460&amp;amp;v=4">
    <h2 class="author">runlan.zhu</h2>
    <h3 class="description">沐阳</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>10</strong><br>文章</div></a>
      <a href="/categories"><div><strong>6</strong><br>分类</div></a>
      <a href="/tags"><div><strong>10</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://zhurunlan.github.io/" target="_blank" title="Github">
          Github
        </a>
      
        <a class="hvr-bounce-in" href="https://www.jianshu.com/u/12040c158e97" target="_blank" title="简书">
          简书
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="http://blog.shanamaid.top/" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
  <iframe frameborder="no" border="0" marginwidth="0" style="margin-left:-20px;" marginheight="0" width="260" height="190" src="//music.163.com/outchain/player?type=0&id=2813068710&auto=1&height=190"></iframe>
</div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2018 - 2019 runlan.zhu<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
        |<script src="http://s11.cnzz.com/z_stat.php?id=123456789&web_id=123456789" language="JavaScript"></script>
      
      
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共{{ totalcount(site) }}字</span>
</div>
      <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title class="menuItem">首页</a>
          
            <a href="/tags" title class="menuItem">标签</a>
          
            <a href="/categories" title class="menuItem">分类</a>
          
            <a href="/archives" title class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>



  </div>
</body>
</html>